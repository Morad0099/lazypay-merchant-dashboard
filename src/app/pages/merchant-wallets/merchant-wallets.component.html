<div class="merchant-wallets-container">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <h1>Merchant Wallets</h1>
      <div class="search-section">
        <div class="search-box">
          <svg class="search-icon" viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" fill="none">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search wallets by account number, type, merchant..." 
            (keyup)="searchWallets($event)"
            class="search-input"
          >
        </div>
        <div class="wallets-count" *ngIf="!loading">
          {{ filteredWallets.length }} wallet{{ filteredWallets.length !== 1 ? 's' : '' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
    <button class="close-btn" (click)="error = null">&times;</button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <span>Loading wallets...</span>
  </div>

  <!-- Wallets Grid -->
  <div class="cards-container">
    <div class="card" *ngFor="let wallet of filteredWallets">
      <div class="card-front">
        <div class="card-header">
          <div class="chip-container">
            <div class="chip"></div>
            <div class="contactless">
              <svg viewBox="0 0 24 24" class="contactless-icon">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
              </svg>
            </div>
          </div>
          <span class="card-type">{{wallet.walletType}}</span>
        </div>
  
        <div class="card-body">
          <div class="card-number">
            <span>{{formatAccountNumber(wallet.accountNumber)}}</span>
          </div>
          <div class="balance-info">
            <div class="balance-primary">
              <span class="label">Available Balance</span>
              <span class="amount">{{formatCurrency(wallet.availableBalance, wallet.currency)}}</span>
            </div>
          </div>
  
          <div class="balance-details">
            <div class="detail-item">
              <span class="label">Confirmed Balance</span>
              <span class="value">{{formatCurrency(wallet.confirmedBalance, wallet.currency)}}</span>
            </div>
            <div class="detail-item">
              <span class="label">Blocked Balance</span>
              <span class="value">{{formatCurrency(wallet.blockedBalance, wallet.currency)}}</span>
            </div>
            <div class="detail-item">
              <span class="label">Unconfirmed Balance</span>
              <span class="value">{{formatCurrency(wallet.unConfirmedBalance, wallet.currency)}}</span>
            </div>
            <div class="detail-item">
              <span class="label">Total Balance</span>
              <span class="value">{{formatCurrency(wallet.totalBalance || 0, wallet.currency)}}</span>
            </div>
          </div>
        </div>
  
        <div class="card-footer">
          <div class="merchant-info">
            <span class="merchant-name">{{merchantname}}</span>
            <span class="account-type">{{wallet.accountType}}</span>
          </div>
          <div class="card-badges">
            <span class="currency-badge">{{wallet.currency}}</span>
            <span class="status-badge" [class.active]="wallet.active">
              {{wallet.active ? 'ACTIVE' : 'INACTIVE'}}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredWallets.length === 0" class="empty-state">
    <i class="fas fa-wallet"></i>
    <p>No wallets found.</p>
  </div>
</div>